{% extends 'base.html' %}

{% block content %}

<div id="flash" style="display:none">
   <div class="alert alert-primary" role="alert">
      No file selected 
  </div>
</div>

<div id="spin" style="display:none">
  <div class="spinner-border" role="status">
    <span class="sr-only">Loading...</span>
  </div>
</div>


<div id ="dropimage">
    Drop image here
</div>

<div>
    <form id="image-form" action="/upload" method="POST" enctype="multipart/form-data">
      <div class="custom-file">
        <input type="file" class="custom-file-input" id="customFile"  name="upload" accept="image/*" required>
         <label class="custom-file-label" for="customFile" id="displayfile">Choose file</label>
           <br>
          <input type='submit' value='Submit' id='img_submit'>
      </div>
    </form>
</div>

<script>

function showSpinner () {
  const spinner = document.querySelector('#spin');
  spinner.style.display= 'inline-block';
}

function hideSpinner () {
  const spinner = document.querySelector('#spin');
  spinner.style.display= 'none';
}
function formInputs(evt){
  const files = document.getElementById('customFile').files;
  console.log(files.length);
  showSpinner();
  
  if (files.length===0){
    console.log(files.length)
    evt.preventDefault();
    const message=document.querySelector('#flash');

    message.style.display = 'block';
    hideSpinner();
  }

}

$('#img_submit').on('click', formInputs);

</script>


<script>

customFile=document.querySelector('#customFile');

customFile.addEventListener('change',()=>{
  var filename = document.getElementById('customFile').files[0].name;
  $('#displayfile').html(filename);
  })

</script>


{% endblock %}