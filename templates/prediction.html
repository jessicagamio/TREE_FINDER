{% extends 'base.html' %}


{% block content %}


<h1 class="title">Your results: </h1>

{% if value != 0 %}
<div>
    There is a a {{value}}% chance that you found a {{common_name}}!

</div>
<div>
    <h2>Facts</h2>
    <p>
    Scientific Name: {{sci_name}}<br>
    Common Name: {{common_name}}<br>
    Leaf Shape: {{shape}}<br>
    Leaf Margin: {{margin}}<br>
    Leaf Venation: {{venation}}<br>
    Facts: {{factoid}}<br>
    <img src="{{image}}">
    <br>
    <button  data-sci_name= {{sci_name}} type="button" class="btn btn-success" id="treehugs">Hugs</button>
    </p>

</div>
<!-- <script>
const hugs = document.getElementById('treehugs');

function addHug(evt){
evt.preventDefault();

$.post('/processhug',{{sci_name}},);    
}

$('treehugs').on('button',addHug)

</script>
 -->
<h1>Find {{common_name}}'s in your area !</h1>
<div id="map"></div>

<script>
    function initMap(){
        const sfBayCoords={lat: 37.7809825, lng:-122.444124};

        const map = new google.maps.Map(document.getElementById('map'),{
                center: sfBayCoords,
                zoom:12
        });

        const markers = {{ markers|tojson }};

        for (let mark of markers){
            let [ lat, lng ] = mark;
            console.log(lat,lng);
            let marker = new google.maps.Marker(
                { 
                    position: {
                        lat: lat,
                        lng: lng
                    },
                    map: map
                }
            );
        }
    }
    // const marker = new google.maps.Marker({ position:sfBayCoords, map:map });
</script>
<script async defer
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBh0-bI-EUg1Pgpy7QT_tTqGBwNDA431o4&callback=initMap">
</script>

{% endif %}



{% if value == 0 %}
<div>
    No significant match found. Try again!
</div>
{% endif %}

{% endblock %}